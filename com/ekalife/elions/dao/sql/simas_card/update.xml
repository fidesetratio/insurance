<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="elions.simas_card">

	<typeAlias alias="dropDown" type="id.co.sinarmaslife.std.model.vo.DropDown"/>
	<typeAlias alias="hashMap" type="java.util.HashMap"/>
	<typeAlias alias="simCard" type="com.ekalife.elions.model.Simcard"/>

	<update id="updateKartuSimasCard" parameterClass="java.util.HashMap">
		UPDATE EKA.MST_SIMCARD  
			SET EKA.MST_SIMCARD.FLAG_PRINT = #flag_print#,   
				EKA.MST_SIMCARD.TGL_PRINT = #tgl_print#   
				WHERE ( EKA.MST_SIMCARD.MSC_JENIS = #msc_jenis# ) AND  
						( EKA.MST_SIMCARD.NO_KARTU = #no_kartu# ) 
	</update>
	
	<update id="updateSuratSimasCard" parameterClass="java.util.HashMap">
		UPDATE EKA.MST_SIMCARD  
			SET EKA.MST_SIMCARD.FLAG_PRINT = #flag_print#
				WHERE ( EKA.MST_SIMCARD.MSC_JENIS = #msc_jenis# ) AND  
						( EKA.MST_SIMCARD.NO_KARTU = #no_kartu# ) 
	</update>
	
	<update id="updateFlagActiveSimCard" parameterClass="java.util.HashMap">
		UPDATE EKA.MST_SIMCARD
			SET EKA.MST_SIMCARD.FLAG_AKTIF = 0
			WHERE EKA.MST_SIMCARD.REG_SPAJ =#reg_spaj#
			  AND TRIM(EKA.MST_SIMCARD.NO_KARTU) =TRIM(#mrc_no_kartu_lama#) 
	</update>
	
	<update id="updateFlagActiveKartuPas" parameterClass="java.util.HashMap">
		UPDATE EKA.MST_KARTU_PAS
			SET EKA.MST_KARTU_PAS.FLAG_ACTIVE = 0
			WHERE EKA.MST_KARTU_PAS.REG_SPAJ = #reg_spaj#
			  AND TRIM(EKA.MST_KARTU_PAS.NO_KARTU) = TRIM(#mrc_no_kartu_lama#)
	</update>
	
	<update id="updateSimasCard" parameterClass="simCard">
		UPDATE eka.mst_simcard                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
			<dynamic prepend=" set ">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
				<isNotNull removeFirstPrepend="true" prepend="," property="alamat">alamat = upper(#alamat#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                            
				<isNotNull removeFirstPrepend="true" prepend="," property="flag_aktif">flag_aktif = #flag_aktif# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                       
				<isNotNull removeFirstPrepend="true" prepend="," property="flag_nb">flag_nb = #flag_nb# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                                
				<isNotNull removeFirstPrepend="true" prepend="," property="flag_print">flag_print = #flag_print# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                       
				<isNotNull removeFirstPrepend="true" prepend="," property="flag_roll">flag_roll = #flag_roll# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                          
				<isNotNull removeFirstPrepend="true" prepend="," property="kartu_ke">kartu_ke = #kartu_ke# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                             
				<isNotNull removeFirstPrepend="true" prepend="," property="kode_pos">kode_pos = upper(#kode_pos#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                      
				<isNotNull removeFirstPrepend="true" prepend="," property="kota">kota = upper(#kota#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                                  
				<isNotNull removeFirstPrepend="true" prepend="," property="lca_cabang">lca_cabang = upper(#lca_cabang#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                
				<isNotNull removeFirstPrepend="true" prepend="," property="lca_id">lca_id = upper(#lca_id#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                            
				<isNotNull removeFirstPrepend="true" prepend="," property="lus_id">lus_id = #lus_id# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                                   
				<isNotNull removeFirstPrepend="true" prepend="," property="mcl_id">mcl_id = upper(#mcl_id#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                            
				<isNotNull removeFirstPrepend="true" prepend="," property="msc_jenis">msc_jenis = #msc_jenis# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                          
				<isNotNull removeFirstPrepend="true" prepend="," property="nama">nama = upper(#nama#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                                  
				<isNotNull removeFirstPrepend="true" prepend="," property="no_kartu">no_kartu = upper(#no_kartu#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                      
				<isNotNull removeFirstPrepend="true" prepend="," property="notes">notes = upper(#notes#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                               
				<isNotNull removeFirstPrepend="true" prepend="," property="polis">polis = #polis# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                                      
				<isNotNull removeFirstPrepend="true" prepend="," property="reg_spaj">reg_spaj = upper(#reg_spaj#) </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                      
				<isNotNull removeFirstPrepend="true" prepend="," property="tgl_akhir">tgl_akhir = #tgl_akhir# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                          
				<isNotNull removeFirstPrepend="true" prepend="," property="tgl_input">tgl_input = #tgl_input# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                          
				<isNotNull removeFirstPrepend="true" prepend="," property="tgl_lahir">tgl_lahir = #tgl_lahir# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                          
				<isNotNull removeFirstPrepend="true" prepend="," property="tgl_naktif">tgl_naktif = #tgl_naktif# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                       
				<isNotNull removeFirstPrepend="true" prepend="," property="tgl_print">tgl_print = #tgl_print# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                          
				<isNotNull removeFirstPrepend="true" prepend="," property="tgl_proses">tgl_proses = #tgl_proses# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                       
				<isNotNull removeFirstPrepend="true" prepend="," property="total_premi">total_premi = #total_premi# </isNotNull>                                                                                                                                                                                                                                                                                                                                                                                                    
			</dynamic>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
		WHERE MSC_JENIS = #msc_jenis#                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
		AND NO_KARTU = #no_kartu#	
	</update>

</sqlMap>